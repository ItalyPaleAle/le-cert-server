server:
  # Interface for the HTTPS API server
  # Set to "0.0.0.0" for listening on all interfaces
  bind: "127.0.0.1"

  # Port for the HTTPS API server
  port: 8443

letsEncrypt:
  # Email for Let's Encrypt registration
  email: "admin@example.com"

  # Use staging environment for testing (set to false for production)
  staging: true

  # DNS provider for DNS-01 challenge
  # All DNS providers supported by lego can be used here
  # See full list: https://go-acme.github.io/lego/dns/
  # Examples: cloudflare, route53, digitalocean, gandi, godaddy, namecheap, etc.
  dnsProvider: "cloudflare"

  # DNS provider credentials (provider-specific environment variables)
  # These will be set as environment variables for the DNS provider
  # You can also set these as system environment variables instead of in the config

  # For Cloudflare:
  dnsCredentials:
    # Use API token (recommended):
    CF_DNS_API_TOKEN: "your-cloudflare-dns-api-token"
    # Or use API key:
    # CF_API_EMAIL: "user@example.com"
    # CF_API_KEY: "your-cloudflare-api-key"

  # For AWS Route53:
  # dnsProvider: "route53"
  # dnsCredentials:
  #   AWS_ACCESS_KEY_ID: "your-access-key"
  #   AWS_SECRET_ACCESS_KEY: "your-secret-key"
  #   AWS_REGION: "us-east-1"

  # For DigitalOcean:
  # dnsProvider: "digitalocean"
  # dnsCredentials:
  #   DO_AUTH_TOKEN: "your-digitalocean-token"

  # For Azure DNS:
  # dnsProvider: "azure"
  # dnsCredentials:
  #   AZURE_CLIENT_ID: "your-client-id"
  #   AZURE_CLIENT_SECRET: "your-client-secret"
  #   AZURE_SUBSCRIPTION_ID: "your-subscription-id"
  #   AZURE_TENANT_ID: "your-tenant-id"
  #   AZURE_RESOURCE_GROUP: "your-resource-group"

  # For ACME-DNS:
  # dnsProvider: "acmedns"
  # dnsCredentials:
  #   ACME_DNS_API_BASE: "https://auth.acme-dns.io"
  #   ACME_DNS_STORAGE_PATH: "/var/lib/cert-server/acme-dns.json"

  # See https://go-acme.github.io/lego/dns/ for all providers and their required environment variables

  # Certificate renewal threshold in days (default: 30)
  # Certificates will be renewed when they expire within this many days
  renewalDays: 30

database:
  # Path to SQLite database file
  path: "/var/lib/cert-server/certs.db"

# Authentication configuration
# IMPORTANT: Configure exactly ONE authentication method (jwt OR psk)
auth:
  # Option 1: OAuth2/OIDC Authentication (recommended for multi-user environments)
  jwt:
    # OAuth2/OIDC issuer URL for token validation
    # This should point to your OAuth2 provider's discovery endpoint
    # Examples:
    #   - Google: "https://accounts.google.com"
    #   - Auth0: "https://your-tenant.auth0.com"
    #   - Azure AD: "https://login.microsoftonline.com/{tenant-id}/v2.0"
    #   - Keycloak: "https://keycloak.example.com/realms/your-realm"
    issuerUrl: "https://accounts.google.com"

    # Expected audience (client ID) for token validation
    # This should match the client ID from your OAuth2 provider
    audience: "your-client-id.apps.googleusercontent.com"

    # Optional: Required scopes that tokens must have
    # requiredScopes:
    #   - "cert-server:read"
    #   - "cert-server:write"

  # Option 2: Pre-Shared Key Authentication (simpler setup, good for internal services)
  # To use PSK, comment out the jwt section above and uncomment this section
  # psk:
  #   # The pre-shared key for API authentication
  #   # MUST be at least 16 characters long
  #   # Generate with: openssl rand -base64 32
  #   key: "your-secure-pre-shared-key-minimum-16-chars"
